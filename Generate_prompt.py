# To run this code you need to install the following dependencies:
# pip install google-genai

import base64
import os
import sys 
from google import genai
from google.genai import types
import json

WORD_DATA = """
wikipediaからとってくる
"""

PROMPT_SUMMARY = f"""
[タスク]

以下の文章を図式化してください。

## 入力
 他の作品の進捗はデジタル体育は家でアイデアを捻り出す事が必要で脆弱性はまだ方向性について話し合えてなくて、Flaskはプログラム基盤が不十分すぎるので、余裕ないけど、今のところプログラム書けそうなのがFlaskしかないので、書くリソースはそっちに割けます。

## 出力
- デジタル体育
    - 家でアイデアを捻り出す事が必要です。
    - 脆弱性はまだ方向性について話し合えていません。

- flaskを使ったプログラム
    - プログラムの基盤が不十分です。
    - 全体の進捗的には余裕がないです。
    - 今のところプログラム書けそうなのがFlaskしかありません。
    - そのため、書くリソースはそっちに割けます。

## 入力
いまチャット相手を用意するためにアカウントデータベースみたいなのを作ろうとしていて、ついでにログイン認証あったら面白いかなと思って作っているのですが、今ちょうどクオートでくくられているsql文とそうでない文の違いに混乱して、トラブってました。

## 出力
- 現在取り組んでいること
    - チャット相手を用意するための「アカウントデータベース」の作成。
    - （追加機能）ログイン認証機能の実装。
- 現在のトラブル・混乱点
    - SQL文の記述における、クオート（引用符）で囲む箇所と囲まない箇所の違い。
    - 現在の状況
    - 実装のついでに機能を追加しようとしているが、構文の仕様により作業が一時停止している。

## 入力
第３回全国情報教育コンテストのエントリーシートです。今回は、第１回、第２回に比べて非常に難しいコンテストになりました。DXハイスクール指定校1,191校は、必ず応募しなければならず、１校１件ではなく無制限なので、最低10個は出すとして、多い学校は1校100件とか普通にあり得ると思います。全国を４ブロックに分けて、本校の北海道・東北・関東ブロックは、応募件数及びレベルも他地域よりも段違いであることが予測されます。応募5000件以上で、入賞数は40～50であり、入賞率は、100分の１程度でしょうか。これらの前提を踏まえると、入賞するためには、エントリーシートをどれだけ作り込めるかが最低ラインになります。それを踏まえた上で、今月中を目途に第１稿をいただけるとスムーズかと思います。全国大会出場10校を目指して頑張りましょう。

## 出力
- コンテストの現状と難易度
    - 第3回全国情報教育コンテストは、過去2回に比べ非常に難易度が高い。
    - **DXハイスクール指定校（1,191校）**に応募義務があり、1校あたりの応募数も無制限（10〜100件/校の予測）。
    - 総応募数は5,000件以上にのぼる見込み。
    - 地域情勢（北海道・東北・関東ブロック）
    - 他のブロックに比べ、応募件数・レベルともに段違いに高い激戦区と予測される。
- 入賞の壁
    - 入賞数は全体で40〜50枠。
    - 入賞率は約**1/100（1%）**程度の超高倍率。
- 今後のアクション・目標
    - 最低ライン： エントリーシートを徹底的に作り込むこと。
    - 直近のタスク： 今月中を目途に「第1稿」を作成・提出。
    - 最終目標： 全国大会出場（上位10校）への選出。

## 入力
明日は、12時30分に生徒昇降口が開きます。ただし、14時から情報オリンピックが始まります。情報オリンピック参加者がいると16時まで、いなければ14時30分に鈴木新先生が帰宅してしまうので、実質開くのは12時30分から14時30分になってしまう可能性が高いです。なので、学校来てもそんなに活動できないと思います。

## 出力
- 明日の予定（学校の開放状況）
    - 生徒昇降口の開門：12時30分。
    - 閉門の可能性：14時30分（実質的な活動可能時間は2時間程度）。
- スケジュールの不確定要素
    - 14時から情報オリンピックが開催される。
    - 情報オリンピック参加者の有無によって、鈴木新先生の帰宅時間が変動する。
        - 参加者がいる場合：16時まで滞在。
        - 参加者がいない場合：14時30分に帰宅。
- 結論・判断
    - 先生が帰宅すると活動が制限されるため、学校に来ても十分な活動時間は確保できない見込み。

## 入力
この西山さんのお嫁さんは、下の農家の中井さんなどは村長さんや二宮巡査の前に飛んで出て、ボヤとまでも行きません、と言ってかばって下さったのに、垣根の外で、風呂場が丸焼けだよ、かまどの火の不始末だよ、と大きい声で言っていらしたひとである。

## 出力
- 西山さんのお嫁さんの振る舞い
    - 周囲が当事者をかばっている状況下で、あえて事態を誇張し、非難するような言動をとった人物。
- 対照的な2人の反応
    - **農家の中井さん**
        - 村長や巡査の前で「ボヤとまでもいかない」と言い、必死に相手をかばった。
    - **西山さんのお嫁さん**
        - 垣根の外から「風呂場が丸焼けだ」「かまどの火の不始末だ」と大声で騒ぎ立てた。

## 入力
私は翌日から、畑仕事に精を出した。下の農家の中井さんの娘さんが、時々お手伝いして下さった。火事を出すなどという醜態を演じてからは、私のからだの血が何だか少し赤黒くなったような気がして、その前には、私の胸に意地悪の蝮が住み、こんどは血の色まで少し変ったのだから、いよいよ野性の田舎娘になって行くような気分で、お母さまとお縁側で編物などをしていても、へんに窮屈で息苦しく、かえって畑へ出て、土を掘り起したりしているほうが気楽なくらいであった。

## 出力
- 翌日からの行動
    - 畑仕事に精を出すようになった。
    - 下の農家の中井さんの娘さんが、時折手伝いに来てくれる。
- 心境と自己認識の変化
    - 火事という「醜態」をきっかけに、自分の血が「赤黒く」なったような感覚を抱いている。
    - 以前から胸にいた「意地悪な蝮（まむし）」に加え、血の色まで変わったことで、いよいよ自分が「野性の田舎娘」になっていくのを感じている。
- 環境による居心地の対比
    - **お母様との時間（縁側で編み物など）**
        - 非常に窮屈で息苦しく感じる。
    - **畑での作業（土を掘り起こすなど）**
        - むしろこちらのほうが気楽でいられる。

## 入力
"""


def generate(model, prompt):
    client = genai.Client(
        api_key="AIzaSyCPWEq8Lr08ynLqrAvTg8Ijsql-FnYCKPU"
    )

    model = model
    contents = [
        types.Content(
            role="user",
            parts=[
                types.Part.from_text(text=prompt),
            ],
        ),
    ]
    generate_content_config = types.GenerateContentConfig(
        thinking_config=types.ThinkingConfig(
            thinking_level="HIGH",
        ),
    )

    response = client.models.generate_content(
        model=model,
        contents=contents,
        #config=generate_content_config,
    )
    print(response.text)
    return response.text

#modelの名前をまとめとく。
#gemini-2.5-flash
#gemini-3-flash
#gemini-2.5-flash-lite
#gemma-3-27b
if __name__ == "__main__":
    result = ""

    with open("dataset.jsonl", "a", encoding="utf-8") as f:
        for word in WORD_DATA.strip("\n"):
        # for word in ["ビックカメラ"]:
            prompt = f"{word}について300文字で一段落箇条書き無しでまとめてください"
            long_text = generate("gemma-3-27b", prompt)
            prompt = f"{PROMPT_SUMMARY}\n{long_text}\n\n## 出力\n"
            result = generate("gemini-2.5-pro", prompt)
            print(long_text , "\n", result)
            json.dump({"text":long_text,"result":result},f, ensure_ascii=False)
            f.write("\n")
            f.flush()
